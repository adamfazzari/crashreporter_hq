<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='crashreport.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='pagination.css') }}">
    <script src="{{ url_for('static', filename='sorttable.js') }}"></script>
    <meta charset="UTF-8">
    <title>Crash Reporter HQ</title>
</head>


<body>

    {% extends "base.html" %}

    {% block content %}

        <form ng-controller="SearchController" ng-submit="submitSearch()" method="post" layout="column" style="background: white; color:black;">
            <ul>
                {% for i in range(3) %}
                    <li style="list-style-type: none">
                        <div layout-gt-sm="row">

                            <md-input-container style="width: 20%">
                                <md-select ng-model={{ "searchform.field%d" % i }} placeholder="Choose a field">
                                    <md-option ng-repeat="s in searchfields" ng-value="s.value">{a s.field a}</md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container style="width: 40%">
                            <input ng-model='{{ "searchform.value%d" % i }}' ng-value={{ "searchform.field%d" % i }}>
                            </input>
                            </md-input-container>
                        </div>
                    </li>
                {% endfor %}
                 <section layout="row" layout-sm="column" layout-align="left center" layout-wrap>
                    <md-button type='submit' class="md-raised" name="search_button">
                        Search
                    </md-button>
                 </section>
            </ul>
        </form>


        <table ng-controller="SearchResultsController" border="1" style="width:100%;">
            <tr>
                {% for header in ('Report #', 'Count', 'Application Name', 'Version', 'User', 'Error Type', 'Error Message', 'Date/Time', '', '') %}
                    <td class="tableheader">{{ header }}</td>
                {% endfor %}
            </tr>

            <tr ng-repeat="r in reports" class="reporttable">
                <td>{a r.report_number a}</td>
                <td><a href="/reports/related/{a r.report_number a}">{a r.n_similar a}</a></td>
                <td>{a r.application_name a}</td>
                <td>{a r.application_version a}</td>
                <td>{a r.user a}</td>
                <td>{a r.error_type a}</td>
                <td>{a r.error_message a}</td>
                <td>{a r.date a}</td>
                <td>
                    <a href="/reports/{a r.report_number a}" class="md-raised">Open</a>
                </td>
                <td>
                    <a href="/reports/{a r.report_number a}/delete" class="md-raised">Delete</a>
                </td>
            </tr>
        </table>

        {% if user.group_admin and show_delete %}
            <form action={{ url_for('delete_report', delete_similar=True, report_numbers=','.join(report_numbers)) }} method="post" name="login" >
                <input type='submit' name='search', value="Delete Results">
                </input>
            </form>
        {% endif %}

    {% endblock %}


</body>
</html>